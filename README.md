# ChatList

ChatList — это Python-приложение с графическим интерфейсом, которое позволяет отправлять один и тот же промт в несколько нейросетей и сравнивать их ответы. Пользователь вводит текст запроса, программа отправляет его в выбранные модели и показывает результаты в виде таблицы. Отмеченные пользователем строки сохраняются в постоянную базу данных.

## Возможности

- ✅ Отправка одного промта в несколько нейросетей одновременно
- ✅ Сравнение ответов в удобной таблице
- ✅ Сохранение промтов и результатов в базе данных SQLite
- ✅ Управление моделями (добавление, редактирование, активация/деактивация)
- ✅ Поддержка различных API: OpenAI, DeepSeek, Groq, OpenRouter
- ✅ Поиск и сортировка промтов, моделей и результатов
- ✅ Экспорт результатов в Markdown и JSON
- ✅ Логирование всех запросов и ошибок
- ✅ Настройки программы

## Требования

- Python 3.11+
- SQLite (встроенная библиотека)
- PyQt5
- requests
- python-dotenv

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` в корне проекта и добавьте ваши API-ключи:
```env
OPENAI_API_KEY=your_openai_api_key_here
DEEPSEEK_API_KEY=your_deepseek_api_key_here
GROQ_API_KEY=your_groq_api_key_here
OPENROUTER_API_KEY=your_openrouter_api_key_here
```

## Использование

### Запуск приложения

```bash
python main.py
```

### Добавление модели

1. Нажмите кнопку "Добавить модель" в панели управления моделями
2. Заполните форму:
   - **Название**: Название модели (например, "GPT-4")
   - **API URL**: URL API для отправки запросов
   - **API ID**: Имя переменной окружения с API-ключом (например, "OPENAI_API_KEY")
   - **Тип модели**: Тип API (OpenAI, DeepSeek, Groq, OpenRouter)
   - **Активна**: Чекбокс для активации/деактивации модели

### Примеры настройки моделей

#### OpenAI
- **Название**: GPT-4
- **API URL**: https://api.openai.com/v1/chat/completions
- **API ID**: OPENAI_API_KEY
- **Тип модели**: OpenAI

#### OpenRouter
- **Название**: GPT-4 через OpenRouter
- **API URL**: https://openrouter.ai/api/v1/chat/completions
- **API ID**: OPENROUTER_API_KEY
- **Тип модели**: OpenRouter

#### DeepSeek
- **Название**: DeepSeek Chat
- **API URL**: https://api.deepseek.com/v1/chat/completions
- **API ID**: DEEPSEEK_API_KEY
- **Тип модели**: DeepSeek

#### Groq
- **Название**: Mixtral 8x7b
- **API URL**: https://api.groq.com/openai/v1/chat/completions
- **API ID**: GROQ_API_KEY
- **Тип модели**: Groq

### Отправка запроса

1. Введите промт в текстовое поле или выберите сохраненный промт из списка
2. (Опционально) Добавьте теги для категоризации
3. Нажмите кнопку "Отправить запрос"
4. Дождитесь получения ответов от всех активных моделей
5. Результаты появятся в таблице справа

### Сохранение результатов

1. Отметьте чекбоксы у нужных результатов
2. Нажмите кнопку "Сохранить выбранные"
3. Результаты будут сохранены в базу данных

### Экспорт результатов

1. Отметьте чекбоксы у нужных результатов
2. Нажмите "Экспорт Markdown" или "Экспорт JSON"
3. Выберите место для сохранения файла

## Структура проекта

```
ChatList/
├── main.py              # Основной файл с интерфейсом
├── db.py                # Модуль работы с базой данных
├── models.py            # Модуль работы с моделями нейросетей
├── network.py           # Модуль для HTTP-запросов
├── logger.py             # Модуль логирования
├── requirements.txt     # Зависимости проекта
├── .env                 # API-ключи (не в репозитории)
├── chatlist.db          # База данных SQLite (создается автоматически)
├── chatlist.log         # Файл логов (создается автоматически)
├── PROJECT.md           # Спецификация проекта
├── PLAN.md              # План реализации
├── DATABASE.md          # Схема базы данных
└── README.md            # Этот файл
```

## База данных

Приложение использует SQLite для хранения данных. База данных создается автоматически при первом запуске.

### Таблицы:

- **prompts** - Сохраненные промты
- **models** - Настройки моделей нейросетей
- **results** - Сохраненные результаты ответов
- **settings** - Настройки программы

Подробное описание схемы базы данных см. в файле `DATABASE.md`.

## Логирование

Все запросы к API и ошибки логируются в файл `chatlist.log`. Логи включают:
- Время запроса
- Название модели
- Промт (первые 100 символов)
- Ответ или ошибка

## Настройки

Настройки программы доступны через меню "Настройки" → "Настройки программы" или кнопку "Настройки" в интерфейсе.

Доступные настройки:
- **Таймаут запросов**: Время ожидания ответа от API (в секундах)

## Устранение неполадок

### Ошибка "API-ключ не найден"
- Убедитесь, что файл `.env` создан и содержит нужную переменную
- Проверьте, что имя переменной в `.env` совпадает с `api_id` в настройках модели

### Модель не отвечает
- Проверьте правильность API URL
- Убедитесь, что API-ключ действителен
- Проверьте логи в файле `chatlist.log`

### Ошибки подключения
- Проверьте интернет-соединение
- Убедитесь, что API сервис доступен
- Попробуйте увеличить таймаут в настройках

## Разработка

### Запуск в режиме разработки

```bash
python main.py
```

### Структура кода

- `db.py` - Инкапсулирует все операции с базой данных
- `models.py` - Логика работы с моделями нейросетей
- `network.py` - Отправка HTTP-запросов к API
- `main.py` - Пользовательский интерфейс на PyQt5
- `logger.py` - Логирование запросов и ошибок

## Лицензия

См. файл LICENSE

## Автор

ChatList - приложение для сравнения ответов нейросетей
